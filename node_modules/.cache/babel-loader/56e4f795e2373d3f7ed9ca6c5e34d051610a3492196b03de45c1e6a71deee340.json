{"ast":null,"code":"import{createContext,useState}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";export const AuthContext=/*#__PURE__*/createContext();export const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);const[tasks,setTasks]=useState([]);const[error,setError]=useState(null);// ðŸ”¹ Register\nconst register=async formData=>{try{setError(null);await axios.post(\"http://localhost:5000/register\",formData);alert(\"Registration successful! Please login.\");}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"Registration failed\");}};// ðŸ”¹ Login\nconst login=async(username,password)=>{try{setError(null);const res=await axios.post(\"http://localhost:5000/login\",{username,password});setUser(res.data.username);fetchTasks(res.data.username);}catch(err){var _err$response2,_err$response2$data;setError(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||\"Login failed\");}};// ðŸ”¹ Logout\nconst logout=()=>{setUser(null);setTasks([]);};// ðŸ”¹ Fetch tasks\nconst fetchTasks=async username=>{try{const res=await axios.get(\"http://localhost:5000/tasks/\".concat(username));setTasks(res.data);}catch(err){setError(\"Failed to fetch tasks\");}};// ðŸ”¹ Add task\nconst addTask=async(title,description)=>{try{setError(null);const res=await axios.post(\"http://localhost:5000/tasks/\".concat(user),{title,description});setTasks([...tasks,res.data]);}catch(err){var _err$response3,_err$response3$data;setError(((_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.message)||\"Task creation failed\");}};// ðŸ”¹ Update task\nconst updateTask=async(id,title,description)=>{try{setError(null);const res=await axios.put(\"http://localhost:5000/tasks/\".concat(user,\"/\").concat(id),{title,description});setTasks(tasks.map(t=>t.id===id?res.data:t));}catch(err){var _err$response4,_err$response4$data;setError(((_err$response4=err.response)===null||_err$response4===void 0?void 0:(_err$response4$data=_err$response4.data)===null||_err$response4$data===void 0?void 0:_err$response4$data.message)||\"Task update failed\");}};// ðŸ”¹ Delete task\nconst deleteTask=async id=>{try{setError(null);await axios.delete(\"http://localhost:5000/tasks/\".concat(user,\"/\").concat(id));setTasks(tasks.filter(t=>t.id!==id));}catch(err){var _err$response5,_err$response5$data;setError(((_err$response5=err.response)===null||_err$response5===void 0?void 0:(_err$response5$data=_err$response5.data)===null||_err$response5$data===void 0?void 0:_err$response5$data.message)||\"Task deletion failed\");}};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,error,register,login,logout,tasks,addTask,updateTask,deleteTask},children:children});};","map":{"version":3,"names":["createContext","useState","axios","jsx","_jsx","AuthContext","AuthProvider","_ref","children","user","setUser","tasks","setTasks","error","setError","register","formData","post","alert","err","_err$response","_err$response$data","response","data","message","login","username","password","res","fetchTasks","_err$response2","_err$response2$data","logout","get","concat","addTask","title","description","_err$response3","_err$response3$data","updateTask","id","put","map","t","_err$response4","_err$response4$data","deleteTask","delete","filter","_err$response5","_err$response5$data","Provider","value"],"sources":["D:/React_Projects/Task_management/task/src/components/context/AuthContext.jsx"],"sourcesContent":["import { createContext, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nexport const AuthContext = createContext();\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [user, setUser] = useState(null);\r\n  const [tasks, setTasks] = useState([]);\r\n  const [error, setError] = useState(null);\r\n\r\n  // ðŸ”¹ Register\r\n  const register = async (formData) => {\r\n    try {\r\n      setError(null);\r\n      await axios.post(\"http://localhost:5000/register\", formData);\r\n      alert(\"Registration successful! Please login.\");\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || \"Registration failed\");\r\n    }\r\n  };\r\n\r\n  // ðŸ”¹ Login\r\n  const login = async (username, password) => {\r\n    try {\r\n      setError(null);\r\n      const res = await axios.post(\"http://localhost:5000/login\", { username, password });\r\n      setUser(res.data.username);\r\n      fetchTasks(res.data.username);\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || \"Login failed\");\r\n    }\r\n  };\r\n\r\n  // ðŸ”¹ Logout\r\n  const logout = () => {\r\n    setUser(null);\r\n    setTasks([]);\r\n  };\r\n\r\n  // ðŸ”¹ Fetch tasks\r\n  const fetchTasks = async (username) => {\r\n    try {\r\n      const res = await axios.get(`http://localhost:5000/tasks/${username}`);\r\n      setTasks(res.data);\r\n    } catch (err) {\r\n      setError(\"Failed to fetch tasks\");\r\n    }\r\n  };\r\n\r\n  // ðŸ”¹ Add task\r\n  const addTask = async (title, description) => {\r\n    try {\r\n      setError(null);\r\n      const res = await axios.post(`http://localhost:5000/tasks/${user}`, {\r\n        title,\r\n        description,\r\n      });\r\n      setTasks([...tasks, res.data]);\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || \"Task creation failed\");\r\n    }\r\n  };\r\n\r\n  // ðŸ”¹ Update task\r\n  const updateTask = async (id, title, description) => {\r\n    try {\r\n      setError(null);\r\n      const res = await axios.put(`http://localhost:5000/tasks/${user}/${id}`, {\r\n        title,\r\n        description,\r\n      });\r\n      setTasks(tasks.map((t) => (t.id === id ? res.data : t)));\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || \"Task update failed\");\r\n    }\r\n  };\r\n\r\n  // ðŸ”¹ Delete task\r\n  const deleteTask = async (id) => {\r\n    try {\r\n      setError(null);\r\n      await axios.delete(`http://localhost:5000/tasks/${user}/${id}`);\r\n      setTasks(tasks.filter((t) => t.id !== id));\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || \"Task deletion failed\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        user,\r\n        error,\r\n        register,\r\n        login,\r\n        logout,\r\n        tasks,\r\n        addTask,\r\n        updateTask,\r\n        deleteTask,\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n"],"mappings":"AAAA,OAASA,aAAa,CAAEC,QAAQ,KAAQ,OAAO,CAC/C,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE1B,MAAO,MAAM,CAAAC,WAAW,cAAGL,aAAa,CAAC,CAAC,CAE1C,MAAO,MAAM,CAAAM,YAAY,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACvC,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGT,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACU,KAAK,CAAEC,QAAQ,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACY,KAAK,CAAEC,QAAQ,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CAExC;AACA,KAAM,CAAAc,QAAQ,CAAG,KAAO,CAAAC,QAAQ,EAAK,CACnC,GAAI,CACFF,QAAQ,CAAC,IAAI,CAAC,CACd,KAAM,CAAAZ,KAAK,CAACe,IAAI,CAAC,gCAAgC,CAAED,QAAQ,CAAC,CAC5DE,KAAK,CAAC,wCAAwC,CAAC,CACjD,CAAE,MAAOC,GAAG,CAAE,KAAAC,aAAA,CAAAC,kBAAA,CACZP,QAAQ,CAAC,EAAAM,aAAA,CAAAD,GAAG,CAACG,QAAQ,UAAAF,aAAA,kBAAAC,kBAAA,CAAZD,aAAA,CAAcG,IAAI,UAAAF,kBAAA,iBAAlBA,kBAAA,CAAoBG,OAAO,GAAI,qBAAqB,CAAC,CAChE,CACF,CAAC,CAED;AACA,KAAM,CAAAC,KAAK,CAAG,KAAAA,CAAOC,QAAQ,CAAEC,QAAQ,GAAK,CAC1C,GAAI,CACFb,QAAQ,CAAC,IAAI,CAAC,CACd,KAAM,CAAAc,GAAG,CAAG,KAAM,CAAA1B,KAAK,CAACe,IAAI,CAAC,6BAA6B,CAAE,CAAES,QAAQ,CAAEC,QAAS,CAAC,CAAC,CACnFjB,OAAO,CAACkB,GAAG,CAACL,IAAI,CAACG,QAAQ,CAAC,CAC1BG,UAAU,CAACD,GAAG,CAACL,IAAI,CAACG,QAAQ,CAAC,CAC/B,CAAE,MAAOP,GAAG,CAAE,KAAAW,cAAA,CAAAC,mBAAA,CACZjB,QAAQ,CAAC,EAAAgB,cAAA,CAAAX,GAAG,CAACG,QAAQ,UAAAQ,cAAA,kBAAAC,mBAAA,CAAZD,cAAA,CAAcP,IAAI,UAAAQ,mBAAA,iBAAlBA,mBAAA,CAAoBP,OAAO,GAAI,cAAc,CAAC,CACzD,CACF,CAAC,CAED;AACA,KAAM,CAAAQ,MAAM,CAAGA,CAAA,GAAM,CACnBtB,OAAO,CAAC,IAAI,CAAC,CACbE,QAAQ,CAAC,EAAE,CAAC,CACd,CAAC,CAED;AACA,KAAM,CAAAiB,UAAU,CAAG,KAAO,CAAAH,QAAQ,EAAK,CACrC,GAAI,CACF,KAAM,CAAAE,GAAG,CAAG,KAAM,CAAA1B,KAAK,CAAC+B,GAAG,gCAAAC,MAAA,CAAgCR,QAAQ,CAAE,CAAC,CACtEd,QAAQ,CAACgB,GAAG,CAACL,IAAI,CAAC,CACpB,CAAE,MAAOJ,GAAG,CAAE,CACZL,QAAQ,CAAC,uBAAuB,CAAC,CACnC,CACF,CAAC,CAED;AACA,KAAM,CAAAqB,OAAO,CAAG,KAAAA,CAAOC,KAAK,CAAEC,WAAW,GAAK,CAC5C,GAAI,CACFvB,QAAQ,CAAC,IAAI,CAAC,CACd,KAAM,CAAAc,GAAG,CAAG,KAAM,CAAA1B,KAAK,CAACe,IAAI,gCAAAiB,MAAA,CAAgCzB,IAAI,EAAI,CAClE2B,KAAK,CACLC,WACF,CAAC,CAAC,CACFzB,QAAQ,CAAC,CAAC,GAAGD,KAAK,CAAEiB,GAAG,CAACL,IAAI,CAAC,CAAC,CAChC,CAAE,MAAOJ,GAAG,CAAE,KAAAmB,cAAA,CAAAC,mBAAA,CACZzB,QAAQ,CAAC,EAAAwB,cAAA,CAAAnB,GAAG,CAACG,QAAQ,UAAAgB,cAAA,kBAAAC,mBAAA,CAAZD,cAAA,CAAcf,IAAI,UAAAgB,mBAAA,iBAAlBA,mBAAA,CAAoBf,OAAO,GAAI,sBAAsB,CAAC,CACjE,CACF,CAAC,CAED;AACA,KAAM,CAAAgB,UAAU,CAAG,KAAAA,CAAOC,EAAE,CAAEL,KAAK,CAAEC,WAAW,GAAK,CACnD,GAAI,CACFvB,QAAQ,CAAC,IAAI,CAAC,CACd,KAAM,CAAAc,GAAG,CAAG,KAAM,CAAA1B,KAAK,CAACwC,GAAG,gCAAAR,MAAA,CAAgCzB,IAAI,MAAAyB,MAAA,CAAIO,EAAE,EAAI,CACvEL,KAAK,CACLC,WACF,CAAC,CAAC,CACFzB,QAAQ,CAACD,KAAK,CAACgC,GAAG,CAAEC,CAAC,EAAMA,CAAC,CAACH,EAAE,GAAKA,EAAE,CAAGb,GAAG,CAACL,IAAI,CAAGqB,CAAE,CAAC,CAAC,CAC1D,CAAE,MAAOzB,GAAG,CAAE,KAAA0B,cAAA,CAAAC,mBAAA,CACZhC,QAAQ,CAAC,EAAA+B,cAAA,CAAA1B,GAAG,CAACG,QAAQ,UAAAuB,cAAA,kBAAAC,mBAAA,CAAZD,cAAA,CAActB,IAAI,UAAAuB,mBAAA,iBAAlBA,mBAAA,CAAoBtB,OAAO,GAAI,oBAAoB,CAAC,CAC/D,CACF,CAAC,CAED;AACA,KAAM,CAAAuB,UAAU,CAAG,KAAO,CAAAN,EAAE,EAAK,CAC/B,GAAI,CACF3B,QAAQ,CAAC,IAAI,CAAC,CACd,KAAM,CAAAZ,KAAK,CAAC8C,MAAM,gCAAAd,MAAA,CAAgCzB,IAAI,MAAAyB,MAAA,CAAIO,EAAE,CAAE,CAAC,CAC/D7B,QAAQ,CAACD,KAAK,CAACsC,MAAM,CAAEL,CAAC,EAAKA,CAAC,CAACH,EAAE,GAAKA,EAAE,CAAC,CAAC,CAC5C,CAAE,MAAOtB,GAAG,CAAE,KAAA+B,cAAA,CAAAC,mBAAA,CACZrC,QAAQ,CAAC,EAAAoC,cAAA,CAAA/B,GAAG,CAACG,QAAQ,UAAA4B,cAAA,kBAAAC,mBAAA,CAAZD,cAAA,CAAc3B,IAAI,UAAA4B,mBAAA,iBAAlBA,mBAAA,CAAoB3B,OAAO,GAAI,sBAAsB,CAAC,CACjE,CACF,CAAC,CAED,mBACEpB,IAAA,CAACC,WAAW,CAAC+C,QAAQ,EACnBC,KAAK,CAAE,CACL5C,IAAI,CACJI,KAAK,CACLE,QAAQ,CACRU,KAAK,CACLO,MAAM,CACNrB,KAAK,CACLwB,OAAO,CACPK,UAAU,CACVO,UACF,CAAE,CAAAvC,QAAA,CAEDA,QAAQ,CACW,CAAC,CAE3B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}